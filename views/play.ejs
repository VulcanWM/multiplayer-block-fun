<!DOCTYPE html>
<html>
  <head>
    <title>Play Game <%= game_id %> - SocketExpress</title>
    <style>
    </style>
  </head>
  <body>
    <h1>GAME <%= game_id %></h1>
    <h3><%= nickname %></h3>
    <div id="canvas">
    </div>
    <style>
      #canvas {
        width:500px;
        height:500px;
        border:1px solid #000000;
      }
      .icon {
        width:25px;
        height:25px;
        position:relative;
        border-radius:3px;
      }
    </style>
    <script src="/socket.io/socket.io.js"></script>
    <script>
      var socket = io();
      const canvas = document.getElementById("canvas");
      const randomX = Math.round((Math.random() * 450) + 25);
      const randomY = Math.round((Math.random() * 450) + 25);
      socket.emit("user joined", "<%= nickname %>", "<%= game_id %>", randomX, randomY)
      socket.on('user joined', function(username, game_id, x_cord, y_cord) {
          if (game_id == "<%= game_id %>"){
            const icon = document.createElement("div")
            icon.id = username
            icon.style.background = "red";
            icon.style.top = x_cord + "px";
            icon.style.left = y_cord + "px";
            icon.classList.add("icon")
            canvas.appendChild(icon)
          }
      })
    </script>
  </body>
</html>
